<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Calculadora</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        font-family: system-ui, Arial;
        max-width: 520px;
        margin: 3rem auto;
      }
      .card {
        border: 1px solid #ddd;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }
      label {
        display: block;
        margin: 0.5rem 0 0.25rem;
      }
      input,
      select,
      button {
        width: 100%;
        padding: 0.6rem;
        border-radius: 10px;
        border: 1px solid #ccc;
      }
      button {
        cursor: pointer;
        margin-top: 1rem;
      }
      .result {
        margin-top: 1rem;
        font-weight: bold;
      }
      .menu {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.5rem;
        margin-bottom: 0.75rem;
      }
      .menu button {
        background: #f0f0f0;
        border: 1px solid #ddd;
      }
      .menu button.active {
        background: #1a73e8;
        color: white;
        border-color: #1a73e8;
      }
    </style>
  </head>
  <body>
    <h1>Calculadora</h1>
    <div class="card">
      <div class="menu">
        <button data-op="sumar" class="active">Sumar</button>
        <button data-op="restar">Restar</button>
        <button data-op="multiplicar">Multiplicar</button>
        <button data-op="dividir">Dividir</button>
      </div>
      <label for="a">Valor de a</label>
      <input id="a" type="number" step="any" placeholder="Ej: 10" />
      <label for="b">Valor de b</label>
      <input id="b" type="number" step="any" placeholder="Ej: 2" />
      <input id="operacion" type="hidden" value="sumar" />
      <button id="btn">Calcular</button>
      <div id="out" class="result"></div>
    </div>

    <script>
      const opInput = document.getElementById("operacion");
      const buttons = document.querySelectorAll(".menu button");
      buttons.forEach((btn) => {
        btn.addEventListener("click", () => {
          buttons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
          opInput.value = btn.dataset.op;
        });
      });

      document.getElementById("btn").addEventListener("click", async () => {
        const a = document.getElementById("a").value;
        const b = document.getElementById("b").value;
        const operacion = document.getElementById("operacion").value;

        const res = await fetch("/calc", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ a, b, operacion }),
        });
        const data = await res.json();
        const out = document.getElementById("out");
        out.textContent = data.error
          ? `Error: ${data.error}`
          : `Resultado: ${data.resultado}`;
      });
    </script>
  </body>
</html>
